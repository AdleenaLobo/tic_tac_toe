(()=>{"use strict";let e,t,n,o,l,r,i,c,u,d,a,s,m,x,f,p,C="x";function E(e,t){return e.textContent=t,e}function v(e,t){for(let n=0;n<t.length;n++)e.appendChild(t[n]);return e}function h(e,t){return e.setAttribute("id",t),e}function b(){"X's turn"==a.textContent?a.textContent="O's turn":a.textContent="X's turn"}function g(e){if(e[0]==e[1]&&e[1]==e[2])return e[0];if(e[3]==e[4]&&e[4]==e[5])return e[3];if(e[6]==e[7]&&e[7]==e[8])return e[6];if(e[0]==e[4]&&e[4]==e[8])return e[0];if(e[2]==e[4]&&e[4]==e[6])return e[2];if(e[0]==e[3]&&e[3]==e[6])return e[0];if(e[1]==e[4]&&e[4]==e[7])return e[1];if(e[2]==e[5]&&e[5]==e[8])return e[2];if(null!=e[1]&&null!=e[3]&&null!=e[5]&&null!=e[7]){let t=0;if(e.forEach((e=>{null!=e&&t++})),9==t)return"full"}}function y(){let e=Array.from(d);for(let t=0;t<e.length;t++)""!=e[t].textContent&&(e[t].textContent="",e[t].removeAttribute("id"))}function S(e,t){console.log(k);let n,o=Number.MIN_SAFE_INTEGER;for(let l=0;l<e.length;l++)if(null==e[l]){e[l]=t;let r=q(e,0,!1);e[l]=null,r>o&&(o=r,n=l)}return n}function q(e,t,n,o){let l=g(e);if(null!=l)return k[l];if(n){let n=Number.MIN_SAFE_INTEGER;for(let l=0;l<e.length;l++)if(null==e[l]){e[l]=o;let r=q(e,t+1,!1,"o");e[l]=null,n=Math.max(r,n)}return n}{let n=Number.MAX_SAFE_INTEGER;for(let l=0;l<e.length;l++)if(null==e[l]){e[l]=o;let r=q(e,t+1,!0,"x");e[l]=null,n=Math.min(r,n)}return n}}let A,L,k="x"==C?{o:1,x:-1,full:0}:{o:-1,x:1,full:0};function w(){if("x"==C){if(0==B){let e=S(D(),"o");console.log(e),console.log(d[e]),d[e].textContent="O",G(),b(),U(d[e],"o")}}else if(1==B){let e=S(D(),"x");console.log(e),console.log(d[e]),d[e].textContent="X",G(),b(),U(d[e],"X")}}let N,X=document.querySelector("body");function I(){console.log(_),console.log(N),X.removeChild(N),X.removeChild(_),X.appendChild(l),B=1}function T(){X.removeChild(N),y(),function(){if("x"==R){let e=parseInt(x.textContent);x.textContent=++e}else if("o"==R){let e=parseInt(f.textContent);f.textContent=++e}else{let e=parseInt(p.textContent);p.textContent=++e}}();let e=[];for(let t=0;t<9;t++)e[t]=null;if("cpu"==M){let e="x"==C?"o":"x";("x"==e&&1==B||"o"==e&&0==B)&&w()}}function P(e){if(null!=e){N=document.createElement("div");let t=document.createElement("div");t.classList.add("model"),N.classList.add("modelWrapper");const n=function(e){let t=document.createElement("div");return t.setAttribute("id","winnerDeclare"),console.log(M),console.log(C),console.log(e),t.textContent="player"==M?"x"==C&&"x"==e?"Player 1 win's":"o"==C&&"x"==e||"x"==C&&"o"==e?"Player 2 win's":"o"==C&&"o"==e?"Player 1 win's":"":"x"==C&&"x"==e?"Player 1 win's":"o"==C&&"x"==e||"x"==C&&"o"==e?"CPU win's":"o"==C&&"o"==e?"Player 1 win's":"",t}(e),o=function(e){let t=document.createElement("div");return t.textContent=`${e.toUpperCase()} Takes the round`,"full"==e&&(e="tie",t.textContent=`${e.toUpperCase()} round`),"x"==e?t.setAttribute("id","x"):"o"==e?t.setAttribute("id","o"):t.setAttribute("id","tie"),t}(e),l=function(){const e=document.createElement("button"),t=document.createElement("button");e.setAttribute("id","quit"),e.textContent="Quit",t.setAttribute("id","nextRound"),t.textContent="Next Round";const n=document.createElement("div");return n.appendChild(e),n.appendChild(t),n}();t.appendChild(n),t.appendChild(o),t.appendChild(l),N.appendChild(t),s.appendChild(N),A=document.querySelector("#quit"),L=document.querySelector("#nextRound"),A.addEventListener("click",I),L.addEventListener("click",T)}}let R,_,M,O,B=1,F=[];function G(){1==B?B--:B++}function U(e,t){e.setAttribute("id",t)}function $(){let e=document.querySelectorAll(".grid > button");F=Array.from(e).map((e=>e.getAttribute("id")))}function D(){let e=F;if(0==F.length)for(let t=0;t<9;t++)e[t]=null;return e}function Q(){""==this.textContent&&(1==B?(this.textContent="X",G(),b(),U(this,"x")):(this.textContent="O",G(),b(),U(this,"o")),$(),R=g(F),P(R)),"cpu"==M&&(w(D()),$(),R=g(F),P(R))}function W(){r.removeChild(l),_=document.createElement("div"),_.classList.add("gamePage"),r.appendChild(_),function(){i=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),i.classList.add("title1"),c.classList.add("grid"),u.classList.add("pointer");let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("button"),o=document.createElement("img"),l=document.createElement("span"),r=document.createElement("span");l=h(l,"x"),r=h(r,"o"),l=E(l,"X"),r=E(r,"O"),t=E(t,"X's turn"),t=h(t,"turn"),o.src="../assets/reload.webp",o.style.height="20px",o.style.width="20px",n=v(n,[o]),n=h(n,"resetBun"),e=v(e,[l,r]),i=v(i,[e,t,n]),function(){for(let e=0;e<9;e++){let e=document.createElement("button");c=v(c,[e])}}(),function(){let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div");e=h(e,"xpointer"),n=h(n,"opointer"),t=h(t,"ties"),o=h(o,"xScoreTitle"),l=h(l,"xScore"),o.textContent="X's Scores",l.textContent="0",e=v(e,[o,l]);let r=document.createElement("div"),i=document.createElement("div");r=h(r,"tieTitle"),i=h(i,"tieScore"),r.textContent=" Ties",i.textContent="0",t=v(t,[r,i]);let c=document.createElement("div"),d=document.createElement("div");c=h(c,"oScoreTitle"),d=h(d,"oScore"),c.textContent="O's Scores",d.textContent="0",n=v(n,[c,d]),u=v(u,[e,t,n]),console.log(u)}(),_.appendChild(i),_.appendChild(c),_.appendChild(u)}(),d=document.querySelectorAll(".grid > button"),a=document.querySelector(".title1>#turn"),s=document.querySelector("body"),m=document.querySelector("#resetBun"),x=document.querySelector("#xScore"),f=document.querySelector("#oScore"),p=document.querySelector("#tieScore"),function(){for(let e=0;e<d.length;e++)d[e].addEventListener("click",Q)}(),"cpu"==M&&"x"!=C&&w(newBoard()),m.addEventListener("click",y)}function j(){O=this;let e=this.getAttribute("id");M="o-background"==e?"cpu":"player"}localStorage.clear(),l=document.querySelector(".container"),t=document.querySelector("#button-container > #x-active"),e=document.querySelector("#button-container > #o"),n=document.querySelector(".buns > #x-background"),o=document.querySelector(".buns > #o-background"),r=document.querySelector("body"),console.log(t,e),e.addEventListener("click",(function(){"o-active"==e.id?(e.id="o",t.id="x-active",C="x"):(e.id="o-active",t.id="x",C="o")})),t.addEventListener("click",(function(){"x-active"==t.id?(e.id="o-active",t.id="x",C="o"):(e.id="o",t.id="x-active",C="x")})),n.addEventListener("click",(()=>{j.bind(n)(),W.bind(n)()})),o.addEventListener("click",(()=>{j.bind(o)(),W.bind(o)()}))})();